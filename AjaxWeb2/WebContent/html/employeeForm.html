<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="showPage2.js"></script>
</head>
<body>
	<table>
		<tr><td>first Name</td>
		    <td><input type="text" id='fName' name='fName'></td></tr>
		<tr><td>last Name</td>
			<td><input type="text" id='lName' name='lName'></td></tr>
		<tr><td>Email</td>
			<td><input type="text" id='email' name='email'></td></tr>
		<tr><td>phone Number</td>
			<td><input type="text" id='phone' name='phone'></td></tr>	
		<tr><td>job Id</td>
			<td><input type="text" id='jobId' name='jobId'></td></tr>
		<tr><td><button id ='btn' onclick='saveBtn()'>SAVE</button></td></tr>
		
	</table>

	<div id="show"></div>
	<script>
		function saveBtn() {
			console.log(this);
			let fName= document.getElementById('fName').value;
			let lName= document.getElementById('lName').value;
			let email= document.getElementById('email').value;
			let phone= document.getElementById('phone').value;
			let jobId= document.getElementById('jobId').value;
			
			let url = '../addEmp?fName='+fName+'&lName='+lName+'&email='+email+'&phone'+phone+'&jobId='+jobId
			let saveReq = new XMLHttpRequest();
			saveReq.open('get', url); //경로는 insert하는 survlet쓰면됨(/addEmp이지만 너무 길어서 url로 빼준다.)
			saveReq.send();
			saveReq.onload = function() {
				console.log(saveReq.responseXML);
				//화면구성(저장누르면 화면이 보이게!) tr, td*6(button) => tbl.appendChild(tr);
				let tr = document.createElement('tr');
				
				//0 ->employee_id
				let td = document.createElement('td');
				let val = 999;
				let tNode = document.createTextNode(val);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//1 ->first_name
				td = document.createElement('td');
				val = document.getElementById('fName').value;
				tNode = document.createTextNode(val);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//2 ->last_name
				td = document.createElement('td');
				val = document.getElementById('lName').value;
				tNode = document.createTextNode(val);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//3 ->email
				td = document.createElement('td');
				val = document.getElementById('email').value;
				tNode = document.createTextNode(val);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//4 ->phone_number
				td = document.createElement('td');
				val = document.getElementById('phone').value;
				tNode = document.createTextNode(val);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//5 ->hire_date
				td = document.createElement('td');
				//val = document.getElementById('salary').value;
				tNode = document.createTextNode(111);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//6 ->job_id
				td = document.createElement('td');
				val = document.getElementById('jobId').value;
				tNode = document.createTextNode(val);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//7 ->salary
				td = document.createElement('td');
				//val = document.getElementById('salary').value;
				tNode = document.createTextNode(100);
				td.appendChild(tNode);
				tr.appendChild(td);
				
				//8 ->버튼
				td = document.createElement('td');
				let btn = document.createElement('button');
				btn.innerHTML = 'DELETE';
				td.appendChild(btn);
				tr.appendChild(td);
				
				document.getElementById('tbl').appendChild(tr);
				
			}
		}
	    //전체리스트 보여주는 페이지
		let xhtp = new XMLHttpRequest(); 
		//이 파일이 html 하위폴더에 있으니까 home으로 가려면 경로를 맞춰줘야함
		xhtp.open('get','../home'); 
		xhtp.send();
		xhtp.onload = showPage2;
		
	</script>
	
</body>
</html>